components:
  schemas:
    W3CProof:
      description: "Proof object implemented according https://w3c.github.io/vc-data-integrity/ specification"
      externalDocs:
        url: "https://w3c.github.io/vc-data-integrity/"
      required:
        ["type", "created", "verificationMethod", "proofPurpose", "proofValue"]
      properties:
        type:
          type: string
          description: "The specific proof type used. For example, an Ed25519Signature2020 type indicates that the proof includes a digital signature produced by an ed25519 cryptographic key."
          example: "JcsSignature2020"
        created:
          type: string
          description: "The string value of an [ISO8601] combined date and time string generated by the Proof Algorithm"
          example: "2020-11-05T19:23:24Z"
        verificationMethod:
          type: string
          description: "A set of parameters required to independently verify the proof, such as an identifier for a public/private key pair that would be used in the proof."
          example: "https://di.example/issuer#z6MkjLrk3gKS2nnkeWcmcxiZPGskmesDpuwRBorgHxUXfxnG"
        proofPurpose:
          type: string
          description: "The specific intent for the proof, the reason why an entity created it. Acts as a safeguard to prevent the proof from being misused for a purpose other than the one it was intended for. For example, a proof can be used for purposes of authentication, for asserting control of a Verifiable Credential (assertionMethod), and several others."
          example: "assertionMethod"
        proofValue:
          type: string
          description: "One of any number of valid representations of proof value generated by the Proof Algorithm."
          example: "zQeVbY4oey5q2M3XKaxup3tmzN4DRFTLVqpLMweBrSxMY2xHX5XTYV8nQApmEcqaqA3Q1gVHMrXFkXJeV6doDwLWx"
        domain:
          type: string
          description: "A string value specifying the restricted domain of the proof."

    W3CSchemaInput:
      description: SchemaInput object with the metadata and claims
      required: ["name", "version", "claims"]
      properties:
        name:
          type: string
          description: Human friendly name of the schema
          example: UniversityDegree
        version:
          type: string
          description: SemVer of the schema
          example: "1.0"
        description:
          type: string
          description: Schema description
        attributes:
          type: "array"
          description: List of attributes
          items:
            type: "string"
          example:
            - first_name
            - last_name
            - date_of_birth

    W3CSchemaMeta:
      description: Schema metadata
      properties:
        type:
          type: string #should be URI
          description: The URI of the schema
          example: "https://w3c-ccg.github.io/vc-json-schemas/schema/2.0/schema.json"
        version:
          type: string
          description: Semantic version of the schema
          example: "1.0"
        id:
          type: string
          description: Globally unique identifier of the schema (composed of issuer did, schema id and version)
          example: "did:example:MDP8AsFhHzhwUvGNuYkX7T;id=06e126d1-fa44-4882-a243-1e326fbe21db;version=1.0"
        name:
          type: string
          description: Human readable schema name
          example: "UniversityDegree"
        author:
          type: string
          description: Issuer DID
          example: "did:example:MDP8AsFhHzhwUvGNuYkX7T"
        authored:
          type: string
          description: Datetime of the schema issuance in ISO format
          example: "2021-01-01T00:00:00+00:00"

    W3CSchemaClaims:
      description: Verifiable Credentials Schema Claims
      properties:
        $schema:
          type: string
          description: "Schema reference that can be used for validation"
          example: "https://json-schema.org/draft/2019-09/schema"
        $id:
          type: string
          description: UID of this Schema
          example: "06e126d1-fa44-4882-a243-1e326fbe21db"
        description:
          type: string
          description: "Schema description"
        type:
          type: string
          description: "OpenAPI specification field that describes the object declaration"
          example: "object"
        properties:
          type: object
          description: "Set of clames"
          additionalProperties: false
          properties:
            claim1:
              type: string
              description: "Some example claim"
        required:
          type: array
          items:
            type: string
          description: "Defines the set of required claims"
        additionalProperties:
          type: boolean
          description: "Restrict the claims set to have additional attributes"

    W3CSchema:
      description: "W3C Json format of the verifiable credentials schema according to VC Data Model"
      allOf:
        - $ref: "#/components/schemas/W3CSchemaMeta"
        - type: object
          properties:
            schema:
              $ref: "#/components/schemas/W3CSchemaClaims"
            proof:
              $ref: "#/components/schemas/W3CProof"

    W3CSchemaPaginated:
      description: "Paginated response that contains an array of the schema objects"
      properties:
        data:
          type: array
          items:
            $ref: "#/components/schemas/W3CSchema"
        offset:
          type: integer
        limit:
          type: integer
        count:
          type: integer

    W3CCredentialInput:
      description: |-
        Credential input object based on which the new instance of the verifiable credentials is created.
        Object contains the minimal set of the fields required to create the credentials for the given subject.
        All other required fields of the verifiable credential depend on the context of the cloud agent
      properties:
        schemaId:
          type: string
          description: "Identity of the Verifiable Credentials Schema associated with this object"
          example: "did:example:MDP8AsFhHzhwUvGNuYkX7T;id=06e126d1-fa44-4882-a243-1e326fbe21db;version=1.0"
        subjectId:
          type: string
          description: "Subject DID of the verifiable credentials object"
          example: "did:prism:subjectofverifiablecredentials"
        claims:
          type: object
          additionalProperties: false
          description: "Clams associated with given credentials object (for now it's just a key/value, later should be more complex"
          properties:
            claim1:
              type: string
              description: "Some example claim"

    W3CCredential:
      description: "Verifiable Credential Object according to W3C specification"
      required: ["id", "type", "issuer", "issuanceDate"]
      properties:
        id:
          type: string
          description: "Credential id or url that can be used to get the status of revoke the credential"
          example: "http://example.edu/credentials/1872"
        type:
          type: string
          description: "Credential type according to W3C specification. Must include VerifiableCredentials and type of concrete credentials"
          example: '["VerifiableCredential", "AlumniCredential"]'
        issuer:
          type: string
          description: "Issuer DID"
          example: "did:prism:issuerdid"
        issuanceDate:
          type: string
          description: "Datetime in ISO format that corresponds to the date of issuance"
          example: "2010-01-01T19:23:24Z"
        credentialSubject:
          type: object
          additionalProperties: false
          required: ["id"]
          description: "Credentials subject DID and claims according to the schema object"
          example:
            id: "did:prism:subject12345"
            alumni_of: "University"
            degree: "master of openapi specification"
          properties:
            id:
              type: string
              description: "DID of the subject of the credential"

        proof:
          $ref: "#/components/schemas/W3CProof"

    W3CCredentialsPaginated:
      description: "Paginated response that contains an array of the credential objects"
      properties:
        data:
          type: array
          items:
            $ref: "#/components/schemas/W3CCredential"
        offset:
          type: integer
        limit:
          type: integer
        count:
          type: integer

    W3CIssuanceBatch:
      description: "An issuance batch object that is associated with thelist of verifiable credentials"
      properties:
        id:
          type: string
          description: "Issuance batch id"
        count:
          type: integer
          description: "Count of the verifiable credentials object in the batch"
        actions:
          type: array
          items:
            $ref: "#/components/schemas/W3CIssuanceBatchAction"

    W3CIssuanceBatchAction:
      description: "Action performed on the list of credentials associated with the issuance batch"
      properties:
        action:
          description: "Action name"
          type: string
          enum: ["sign", "issue", "send"]
          example: "issue"
        id:
          description: "Action id for tracking"
          type: string
          example: "uid"
        status:
          description: "Action status"
          type: string
          enum: ["scheduled", "pending", "completed", "failed"]

    W3CIssuanceBatchPaginated:
      description: "Paginated response that contains an array of the issuance-batch objects"
      properties:
        data:
          type: array
          items:
            $ref: "#/components/schemas/W3CIssuanceBatch"
        offset:
          type: integer
        limit:
          type: integer
        count:
          type: integer

    W3CCredentialStatus:
      description: Verifiable Credential revocation status
      required:
        - status
      properties:
        status:
          description: Status name
          type: string
          enum:
            - issued
            - revoked
          example: "issued"
        description:
          type: string
          description: Description about the status
          example: "Issued by did:prism:issuer12354 on 2022-02-01"

    W3CCredentialRevocationRequest:
      description: Credential revocation request. Contain credential id and other information required for revocation
      required:
        - credentialId
      additionalProperties: false
      properties:
        credentialId:
          type: string
          description: Credential identity
          example: "abcde-12345"

    W3CCredentialRevocationResponse:
      description: Credential revocation response. Contain credential id and revocation operation for tracing the completion
      required:
        - credentialId
        - operationId
        - status
      properties:
        credentialId:
          type: string
          description: Credential identity
          example: "abcde-12345"
        operation:
          $ref: "#/components/schemas/RevocationStatus"

    RevocationStatus:
      description: Revocation status record
      properties:
        id:
          type: string
          description: Operation id
          example: "operation1235"
        status:
          type: string
          description: Operation status
          enum:
            - scheduled
            - pending
            - completed
            - failed

    W3CPresentationInput:
      description: Verifiable Presentation input
      properties:
        schemas:
          type: string # TODO: Define the schema for Presentation Input

    W3CPresentation:
      description: Verifiable Presentation object
      properties:
        schemas:
          type: string # TODO: define the exactly schema for Presentation

    W3CPresentationPaginated:
      description: "Paginated response that contains an array of the presentation objects"
      properties:
        data:
          type: array
          items:
            $ref: "#/components/schemas/W3CPresentation"
        offset:
          type: integer
        limit:
          type: integer
        count:
          type: integer
